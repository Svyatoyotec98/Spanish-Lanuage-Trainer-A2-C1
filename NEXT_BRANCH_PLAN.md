# План работы для следующей ветки

## Итоги текущей ветки (claude/review-card-matching-HCW1O)

### Что было сделано:

1. **Экзамен полностью переработан:**
   - Экзамен теперь привязан к КОНКРЕТНОЙ Unidad (не ко всем сразу)
   - Разблокировка: (Palabras + Ejercicios) / 2 >= 80%
   - Вопросы генерируются только из текущей Unidad
   - Убраны подсказки с переводом на русский в экзамене
   - При сдаче экзамена (80%+) разблокируется следующая Unidad

2. **Исправлен расчёт прогресса группы:**
   - Для групп 10+ слов: (easy + medium + hard) / 3
   - Для групп <10 слов (Card Matching): только easy уровень

3. **Кнопка "Следующий тест":**
   - Добавлена в результаты Card Matching и обычных тестов
   - Логика: сначала следующий уровень (easy → medium → hard), потом следующая группа
   - Скрывается на последнем тесте последней группы

4. **Исправлены баги:**
   - Экзамен больше не считает прогресс по всем 10 Unidades (только по загруженным)
   - Кнопка "Следующий тест" теперь корректно переходит на следующий уровень

### Что осталось:
- Ручное тестирование экзамена (много вопросов, нужно знать материал)

---

## План на следующую ветку

### 1. Визуализация словаря Palabras (ПРИОРИТЕТ)

**Проблема:** Пользователь открывает семантическую группу (например FAMILIA), но не знает слов. Сразу проходить тест = получить плохую оценку.

**Решение:** Добавить возможность ПРОСМОТРА слов перед тестом.

**Как должно работать:**
- Пользователь кликает на группу (FAMILIA)
- Открывается мини-словарь с карточками слов
- Каждая карточка показывает:
  - Слово на испанском
  - Перевод на русский
  - 2 примера предложений (взять из hardSentences, которые уже есть в JSON)
- После просмотра - кнопка "Начать тест"

**Дополнительно:**
- Убрать отображение количества слов (6, 18 и т.д.) - это не нужно пользователю

### 2. Доработка справочника грамматики

**Текущее состояние:**
- Есть общий справочник с 31 правилом для A2
- Правила в справочнике НЕ соответствуют конкретным Unidades
- В Ejercicios есть правила специфичные для каждого Unidad (por/para, Presente de Indicativo, etc.)

**Что нужно:**
- Связать справочник с Unidades
- Или создать отдельные правила для каждого Unidad в JSON
- Перед прохождением упражнения показать соответствующее правило

### 3. Визуализация правил для Ejercicios

**Проблема:** Пользователь открывает упражнение, но не знает грамматическое правило.

**Решение:**
- Перед каждым упражнением показать краткое правило
- Правило можно хранить в JSON ejercicios (поле `rule` или `explanation`)
- После прочтения правила - кнопка "Начать упражнение"

### 4. Общий словарь (опционально)

**Идея:** Отдельная кнопка "Словарь" которая показывает ВСЕ слова из всех Unidades.

**Функционал:**
- Поиск по словам
- Фильтр по Unidad
- Фильтр по семантической группе

---

## Технические заметки

### Структура данных Unidad1.json:

```json
{
  "id": "unidad_1",
  "groups": {
    "FAMILIA": [
      {
        "spanish": "el abuelo",
        "ru": "дедушка",
        "hardSentences": [
          "Mi ___ tiene 80 años.",
          "___ cuenta historias interesantes.",
          ...
        ]
      }
    ]
  },
  "ejercicios": [
    {
      "id": "ejercicio_1",
      "title": "Por vs Para",
      "hint": "...",
      "questions": [...]
    }
  ]
}
```

### Для визуализации слов использовать:
- `word.spanish` - слово
- `word.ru` - перевод
- `word.hardSentences[0]` и `word.hardSentences[1]` - примеры (заменить ___ на слово)

### Справочник грамматики:
- Файл: `data/grammar_rules.json`
- Содержит 31 правило для A2
- Нужно проверить соответствие правил и Unidades

---

## Порядок работы

1. Сначала - визуализация словаря Palabras (самое важное)
2. Затем - визуализация правил Ejercicios
3. Потом - доработка справочника
4. Опционально - общий словарь

---

*Файл создан: 2026-01-05*
*Ветка: claude/review-card-matching-HCW1O*
